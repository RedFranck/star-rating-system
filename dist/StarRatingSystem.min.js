Module="undefined"!=typeof Module?Module:{},Module.StarRatingSystem=function(t){function e(t,e){this.options={},this.el_moduleParent,this.el_moduleContainer,this.el_starContainer,this.el_backgroundScore,this.listeners={scoreUpdated:[]},this.init(t,e)}return e.prototype={addListener:function(t,e){this.listeners[t].push(e)},fireEvent:function(t,e){if(this.listeners[t])for(var n=0,i=this.listeners[t].length;i>n;n++)this.listeners[t][n].call(e)},setScore:function(t){this.el_backgroundScore.width(100*t+"%")},init:function(e,n){this.el_moduleParent=t(e),options=this.mergeDefaultOptions(n||{}),this.el_moduleContainer=t('<div class="srs-container" data-srs-module="main"></div>'),this.el_backgroundScore=t('<div class="srs-background-score" data-srs-handle="background-score"></div>'),this.el_starContainer=this.createStarContainer(),this.el_moduleContainer.append(this.el_starContainer),this.el_moduleContainer.append(this.el_backgroundScore),this.setDynamicStyle(),this.setScore(options.defaultScore),this.el_starContainer.on("click",'[data-srs-action="rate"]',this.handleStarClick.bind(this)),this.el_moduleParent.append(this.el_moduleContainer)},mergeDefaultOptions:function(e){var n={defaultScore:0,maxStar:5,starImageLocation:"StarRatingSystem_star.png"};return t.extend(!0,n,e)},createStarContainer:function(){for(var e=t('<div class="srs-star-container" data-srs-handle="star-container"></div>'),n=options.maxStar;n>0;n--)e.append(t('<button class="single-star" data-srs-action="rate"><img src="'+options.starImageLocation+'" /></button>'));return e},handleStarClick:function(e){var n=t(e.currentTarget),i=(n.index()+1)/(n.siblings().length+1);this.fireEvent("scoreUpdated",[i]),this.setScore(i)},setDynamicStyle:function(){var t=this.el_starContainer.find(".single-star");t.width(100/t.length+"%")}},e}(jQuery);