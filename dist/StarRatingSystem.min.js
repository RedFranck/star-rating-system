Module="undefined"!=typeof Module?Module:{},Module.StarRatingSystem=function(a){function b(a,b){this.options={},this.el_moduleParent,this.el_moduleContainer,this.el_starContainer,this.el_backgroundScore,this.listeners={scoreUpdated:[]},this.init(a,b)}return b.prototype={addListener:function(a,b){this.listeners[a].push(b)},fireEvent:function(a,b){if(this.listeners[a])for(var c=0,d=this.listeners[a].length;c<d;c++)this.listeners[a][c].apply(null,b)},setScore:function(a){this.el_backgroundScore.outerWidth(100*a+"%")},init:function(b,c){this.el_moduleParent=a(b),options=this.mergeDefaultOptions(c||{}),this.el_moduleContainer=a('<div class="srs-container" data-srs-module="main"></div>'),this.el_backgroundScore=a('<div class="srs-background-score" data-srs-handle="background-score"></div>'),this.el_starContainer=this.createStarContainer(),this.el_moduleContainer.append(this.el_starContainer),this.el_moduleContainer.append(this.el_backgroundScore),this.setDynamicStyle(),this.setScore(options.defaultScore),options.clickEnabled===!0?this.el_starContainer.on("click",'[data-srs-action="rate"]',this.handleStarClick.bind(this)):"once"===options.clickEnabled&&this.el_starContainer.one("click",'[data-srs-action="rate"]',this.handleStarClick.bind(this)),this.el_moduleParent.append(this.el_moduleContainer)},mergeDefaultOptions:function(b){var c={defaultScore:0,maxStar:5,starImageLocation:"StarRatingSystem_star.png",clickEnabled:!0};return a.extend(!0,c,b)},createStarContainer:function(){for(var b=a('<div class="srs-star-container" data-srs-handle="star-container"></div>'),c=options.maxStar;c>0;c--)b.append(a('<button class="single-star" data-srs-action="rate"><img src="'+options.starImageLocation+'" /></button>'));return b},handleStarClick:function(b){b.preventDefault();var c=a(b.currentTarget),d=(c.index()+1)/(c.siblings().length+1);this.fireEvent("scoreUpdated",[this,d]),this.setScore(d)},setDynamicStyle:function(){var a=this.el_starContainer.find(".single-star");a.outerWidth(100/a.length+"%")}},b}(jQuery);